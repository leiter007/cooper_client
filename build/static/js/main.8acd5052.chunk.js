(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{186:function(e,t,a){e.exports=a(334)},334:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(38),i=a.n(s),o=(a(191),a(60)),c=a(19),l=a.n(c),u=a(23),p=a(47),d=a(48),h=a(51),m=a(49),g=a(52),f=function(e,t,a){var n,r=function(e){switch(!0){case e>=13&&e<=14:return"13-14";case e>=15&&e<=16:return"15-16";case e>=17&&e<=19:return"17-19";case e>=20&&e<=29:return"20-29";case e>=30&&e<=39:return"30-39";case e>=40&&e<=49:return"40-49";case e>=50:return"50+";default:return"invalid range"}}(parseInt(a));return"invalid range"===r?"Invalid age range":({female:{"13-14":[">2000","1900-1999","1600-1899","1500-1599","<1500"],"15-16":[">2100","2000-2099","1700-1999","1600-1699","<1600"],"17-19":[">2300","2100-2299","1800-2099","1700-1799","<1700"],"20-29":[">2700","2200-2699","1800-2199","1500-1799","<1500"],"30-39":[">2500","2000-2499","1700-1999","1400-1699","<1400"],"40-49":[">2300","1900-2299","1500-1899","1200-1499","<1200"],"50+":[">2200","1700-2199","1400-1699","1100-1399","<1100"]},male:{"13-14":[">2700","2400-2699","2200-2399","2100-2199","<2100"],"15-16":[">2800","2500-2799","2300-2499","2200-2299","<2200"],"17-19":[">3000","2700-2999","2500-2699","2300-2499","<2300"],"20-29":[">2800","2400-2799","2200-2399","1600-2199","<1600"],"30-39":[">2700","2300-2699","1900-2299","1500-1999","<1500"],"40-49":[">2500","2100-2499","1700-2099","1400-1699","<1400"],"50+":[">2400","2000-2399","1600-1999","1300-1599","<1300"]}}[t.toLowerCase()][r].forEach(function(t,a){if(t.match(/>\d*/)&&e>=parseInt(t.slice(1),10)||t.match(/<\d*/)&&e<parseInt(t.slice(1),10))n=a;else{var r=t.split("-"),s=parseInt(r[0],10),i=parseInt(r[1],10);e>=s&&e<=i&&(n=a)}}),["Excellent","Above average","Average","Below average","Poor"][n])},v=a(106),b=a(61),E=a.n(b),y=function(){var e=Object(u.a)(l.a.mark(function e(t,a){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"https://cooper-felix-george.herokuapp.com/api/v1/auth/sign_in",e.prev=1,e.next=4,E.a.post("https://cooper-felix-george.herokuapp.com/api/v1/auth/sign_in",{email:t,password:a});case 4:return n=e.sent,e.next=7,x(n);case 7:return sessionStorage.setItem("current_user",JSON.stringify({id:n.data.data.id})),e.abrupt("return",{authenticated:!0});case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",{authenticated:!1,message:e.t0.response.data.errors[0]});case 14:case"end":return e.stop()}},e,null,[[1,11]])}));return function(t,a){return e.apply(this,arguments)}}(),x=function(e){e.data;var t=e.headers;return new Promise(function(e){var a=t.uid,n=t.client,r=t["access-token"],s=t.expiry;sessionStorage.setItem("credentials",JSON.stringify({uid:a,client:n,access_token:r,expiry:s,token_type:"Bearer"})),e(!0)})},k=function(){var e=Object(u.a)(l.a.mark(function e(t,a){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sessionStorage.getItem("credentials");case 2:return n=e.sent,n=JSON.parse(n),n=Object(v.a)({},n,{"Content-type":"application/json",Accept:"application/json"}),"https://cooper-felix-george.herokuapp.com/api/v1/performance_data",e.abrupt("return",new Promise(function(e,r){E.a.post("https://cooper-felix-george.herokuapp.com/api/v1/performance_data",{performance_data:{data:{message:t,distance:a}}},{headers:n}).then(function(t){x(t),e(t.data.message)})}));case 7:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sessionStorage.getItem("credentials");case 2:return t=e.sent,t=JSON.parse(t),t=Object(v.a)({},t,{"Content-type":"application/json",Accept:"application/json"}),"https://cooper-felix-george.herokuapp.com/api/v1/performance_data",e.abrupt("return",new Promise(function(e,a){E.a.get("https://cooper-felix-george.herokuapp.com/api/v1/performance_data",{headers:t}).then(function(t){x(t),e(t)})}));case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),C=a(346),O=a(345),S=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"calculate",value:function(){return f(this.props.distance,this.props.gender,this.props.age)}},{key:"saveCooperData",value:function(){var e=Object(u.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.calculate(),e.prev=1,e.next=4,k(t,this.props.distance);case 4:this.props.entryHandler(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[1,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t;return!0===this.props.authenticated&&!1===this.props.entrySaved?t=r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{compact:!0,color:"teal",id:"save-result",onClick:this.saveCooperData.bind(this)},"Save entry")):!0===this.props.authenticated&&!0===this.props.entrySaved&&(t=r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,null,r.a.createElement("p",null,"Your entry was saved")))),""!==this.props.age&&""!==this.props.distance&&(e=r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,this.props.age," y/o ",this.props.gender," running ",this.props.distance," meters."),r.a.createElement("p",null,"Result: ",this.calculate()),t)),r.a.createElement("div",null,e)}}]),t}(n.Component),j=a(343),D=a(344),I=a(85),A=a(341),F=function(e){var t=[{text:"Female",value:"female"},{text:"Male",value:"male"}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{type:"medium"},r.a.createElement(j.a.Field,{inline:!0},r.a.createElement(D.a,{selection:!0,id:"gender",defaultValue:t[0].value,options:t,onChange:function(t,a){var n=a.value;return e.handleGenderChange(n)}}),r.a.createElement(I.a,{pointing:"left"},"Choose your gender")),r.a.createElement(A.a,{horizontal:!0},"Fill in distance you ran in 12 minutes, and your age"),r.a.createElement(j.a.Input,{fluid:!0,id:"distance",placeholder:"Distance (metres)",onChange:e.inputChangeHandler}),r.a.createElement(j.a.Input,{fluid:!0,id:"age",placeholder:"Age (years)",onChange:e.inputChangeHandler})))},H=function(e){return r.a.createElement(j.a,{type:"medium",id:"login-form"},r.a.createElement(j.a.Input,{fluid:!0,id:"email",placeholder:"Email",onChange:e.inputChangeHandler}),r.a.createElement(j.a.Input,{fluid:!0,id:"password",placeholder:"Password",onChange:e.inputChangeHandler}),r.a.createElement(C.a,{compact:!0,color:"teal",onClick:function(t){return e.loginHandler(t)},id:"submit"},"Submit"))},P=a(347),_=a(348),L=a(110),J=a(105),B=a.n(J),Y=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={performanceData:null},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getPerformanceData()}},{key:"getPerformanceData",value:function(){var e=Object(u.a)(l.a.mark(function e(){var t,a=this;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:t=e.sent,this.setState({performanceData:t.data.entries},function(){a.props.indexUpdated()});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,a,n,s,i,o=[],c=[],l=[],u={labels:["Excellent","Above Average","Average","Below Average","Poor"],datasets:[{label:"Performance Status",data:l,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)"],borderColor:["rgba(255,99,132,1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},p={datasets:[{label:"Distance over time",data:o}],labels:c};if(!0===this.props.updateIndex&&this.getPerformanceData(),null!=this.state.performanceData){this.state.performanceData.forEach(function(e){var t=e.created_at,a=new Date(t),n=B()(a).format("YYYY-MM-DD");o.push(e.data.distance),c.push(n)}),t=0;for(var d=0;d<this.state.performanceData.length;d++)"Excellent"===this.state.performanceData[d].data.message&&t++;a=0;for(var h=0;h<this.state.performanceData.length;h++)"Above average"===this.state.performanceData[h].data.message&&a++;n=0;for(var m=0;m<this.state.performanceData.length;m++)"Average"===this.state.performanceData[m].data.message&&n++;s=0;for(var g=0;g<this.state.performanceData.length;g++)"Below average"===this.state.performanceData[g].data.message&&s++;i=0;for(var f=0;f<this.state.performanceData.length;f++)"Poor"===this.state.performanceData[f].data.message&&i++;l.push(t),l.push(a),l.push(n),l.push(s),l.push(i),e=r.a.createElement("div",null,this.state.performanceData.map(function(e){return r.a.createElement("div",{key:e.id},"Your result of ",r.a.createElement("b",null,e.data.distance)," meters is ",r.a.createElement("b",null,e.data.message))}))}return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{horizontal:!0},"Distance and Result log"),r.a.createElement(P.a,null,r.a.createElement(O.a,null,e)),r.a.createElement(_.a,{container:!0,columns:2},r.a.createElement(_.a.Column,null,r.a.createElement(L.b,{data:p,options:{scales:{yAxes:[{ticks:{beginAtZero:!0,min:0}}]}}})),r.a.createElement(_.a.Column,null,r.a.createElement(L.a,{data:u,options:{responsive:!0,scales:{yAxes:[{ticks:{beginAtZero:!0,min:0}}]}}}))))}}]),t}(n.Component),N=a(342),G=a(350),M=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={distance:"",gender:"female",age:"",renderLoginForm:!1,authenticated:!1,email:"",password:"",message:"",entrySaved:!1,renderIndex:!1,updateIndex:""},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"onLogin",value:function(){var e=Object(u.a)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,y(this.state.email,this.state.password);case 3:!0===(a=e.sent).authenticated?this.setState({authenticated:!0}):this.setState({message:a.message,renderLoginForm:!1});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"entryHandler",value:function(){this.setState({entrySaved:!0,updateIndex:!0})}},{key:"indexUpdated",value:function(){this.setState({updateIndex:!1})}},{key:"handleGenderChange",value:function(e){this.setState({gender:e})}},{key:"onChange",value:function(e){var t;this.setState((t={},Object(o.a)(t,e.target.id,e.target.value),Object(o.a)(t,"entrySaved",!1),t))}},{key:"render",value:function(){var e,t,a,n=this;return!0===this.state.authenticated?(t=JSON.parse(sessionStorage.getItem("credentials")).uid,e=r.a.createElement("p",null,"Hi ",t),a=!0===this.state.renderIndex?r.a.createElement(r.a.Fragment,null,r.a.createElement(Y,{updateIndex:this.state.updateIndex,indexUpdated:this.indexUpdated.bind(this)}),r.a.createElement(C.a,{compact:!0,color:"teal",onClick:function(){return n.setState({renderIndex:!1})}},"Hide past entries")):r.a.createElement(C.a,{compact:!0,color:"teal",id:"show-index",onClick:function(){return n.setState({renderIndex:!0})}},"Show past entries")):e=!0===this.state.renderLoginForm?r.a.createElement(r.a.Fragment,null,r.a.createElement(H,{loginHandler:this.onLogin.bind(this),inputChangeHandler:this.onChange.bind(this)})):r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{compact:!0,color:"teal",id:"login",onClick:function(){return n.setState({renderLoginForm:!0})}},"Login"),r.a.createElement("p",null,this.state.message)),r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,null,r.a.createElement(G.a,{as:"h1",textAlign:"center"},"THE COOPER TEST"),r.a.createElement(A.a,null),r.a.createElement(O.a,null,e),r.a.createElement(P.a,null,r.a.createElement(F,{inputChangeHandler:this.onChange.bind(this),handleGenderChange:this.handleGenderChange.bind(this)})),r.a.createElement(A.a,{horizontal:!0},"Wait for you physical assessment..."),r.a.createElement(P.a,null,r.a.createElement(O.a,{color:"teal"},r.a.createElement(S,{distance:this.state.distance,gender:this.state.gender,age:this.state.age,authenticated:this.state.authenticated,entrySaved:this.state.entrySaved,entryHandler:this.entryHandler.bind(this)}))),a))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[186,1,2]]]);
//# sourceMappingURL=main.8acd5052.chunk.js.map